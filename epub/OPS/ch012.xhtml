<?xml version="1.0" encoding="utf-8"?>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xml:lang="en" lang="en">
  <head>
    <title>An Introduction To Frequency Modulation</title>
    <link rel="stylesheet" type="text/css" href="css/book.css" />
  </head>

  <body>
    <section class="chapter" title="An Introduction To Frequency Modulation" epub:type="chapter" id="ch012">
      <h2 class="title">An Introduction To Frequency Modulation</h2>

      <p>How many people can claim to have discovered an entirely new form of sound synthesis? John Chowning can. He did so by accident while experimenting with different types of vibrato at Stanford University in the mid-‘60s. Chowning found that when the frequency of the modulating signal increased beyond a certain point, the vibrato effect disappeared from the modulated tone, and a complex new tone replaced the original. With hindsight, we can see that he had stumbled upon what is now the most common encoding technique used for public radio transmission (hence ‘FM’ radio). But what made his discovery so serendipitous was that unlike radio engineers, who work at very high frequencies, way above the limits of human hearing, Chowning was able to listen to the modulated waveform. He quickly discovered that FM is a very powerful method of synthesis and, in 1966, became the first person to compose and record a piece of music using FM as the exclusive means of sound generation.</p>
      <p>Chowning and his associates spent the next few years refining FM, and laid down a sound mathematical and practical basis for the results they were achieving. Chowning then had the Stanford University Licensing Office approach a number of American manufacturers to see whether they would be interested in implementing it as a commercial method of synthesis. At a time when the Minimoog and ARP Odyssey ruled, polysynths were but a twinkle in electronic engineers’ eyes, and 4-bit microprocessors were state-of-the-art devices, none of the American manufacturers saw the potential of FM. So it was almost in desperation that Stanford turned to Yamaha. An engineer named Mr. Ichimura was duly despatched to see Chowning, and the rest, as they say, is history.</p>
      <p>As a direct consequence of Yamaha’s amazing success throughout the ‘80s – the company sold millions of FM synthesizers, organs and home keyboards – we now think of FM as an exclusively digital process. But that is not the case. It is more practical to implement it in digital form, but the theory of FM is just as applicable to analogue oscillators, as we shall see…</p>

      <h3>Once more, a little maths</h3>

      <p>Last chapter I explained Amplitude Modulation, and described some of the ways in which it allows you to create new sounds. Let’s recap a little. <a href="#eq-12-1">Equation 12.1</a> and <a href="#eq-12-2">Equation 12.2</a> show two instances of the simplest waveform: a sine wave. The instantaneous amplitudes of the waveforms (their levels at any given point in time, called ‘A’) are related to their gains (the maximum amplitude reached in their cycles, called ‘a’), their frequencies (‘w’) and time (‘t’). And, as before, the subscripts ‘1’ and ‘2’ denote waveform 1 and 2 respectively.</p>
      <figure class="equation-img" id="eq-12-1">
        <img src="images/eq-12-1.png" />
        <figcaption>Equation 12.1 – A simple ‘cosine’ wave</figcaption>
      </figure>
      <figure class="equation-img" id="eq-12-2">
        <img src="images/eq-12-2.png" />
        <figcaption>Equation 12.2 – A second ‘cosine’ wave</figcaption>
      </figure>

      <p>If you refer back, you’ll also remember that we defined the maximum amplitude of the first waveform as the gain of a VCA, and wemodulated this using the second waveform, as shown in <a href="#fig-12-1">Figure 12.1</a>. <a href="#eq-12-3">Equation 12.3</a> shows how I wrote the mathematics that describes this arrangement.</p>
      <figure class="equation-img" id="eq-12-3">
        <img src="images/eq-12-3.png" />
        <figcaption>Equation 12.3 – The equation defining the output waveform from the VCA in Figure 1</figcaption>
      </figure>
      <figure id="fig-12-1">
        <img src="images/fig-12-1.png" />
        <figcaption>Figure 12.1</figcaption>
      </figure>

      <p>But now we’re going to mix things up a bit. Instead of modulating the amplitude of the first waveform, we’re going to modulate its frequency. The block diagram that describes this is deceptively simple, as I have shown in <a href="#fig-12-2">Figure 12.2</a>. Similarly, the equation describing Frequency Modulation (<a href="#eq-12-4">Equation 12.4</a>) looks no more fearsome than that describing Amplitude Modulation. Indeed, if you look closely you can see that exactly the same terms are present in both, it’s just that one of them (A2) has changed position.</p>
      <figure id="fig-12-2">
        <img src="images/fig-12-2.png" />
        <figcaption>Figure 12.2</figcaption>
      </figure>
      <figure class="equation-img" id="eq-12-4">
        <img src="images/eq-12-4.png" />
        <figcaption>Equation 12.4 – The equation defining the output waveform from Oscillator 1 in Figure 2</figcaption>
      </figure>

      <p>If we now echo last chapter and substitute the full expression for A2 into <a href="#eq-12-4">Equation 12.4</a>, we obtain <a href="#eq-12-5">Equation 12.5</a>.</p>
      <figure class="equation-img" id="eq-12-5">
        <img src="images/eq-12-5.png" />
        <figcaption>Equation 12.5 – Another way of writing equation 4</figcaption>
      </figure>

      <p>At this point, you would be completely justified in running, screaming, for the hills. Unlike last chapter’s equations (which we could interpret using no more than ‘O’-level or maybe ‘A’-level maths) this one is a monster. Indeed, even with a degree in mathematics, you would be hard pressed to do much with it. You will, therefore, be delighted to know that I’m not even going to try to solve the equation. Unfortunately, that means that you will have to take many of the following facts on trust. But hey… trust me, I once lived with a doctor!</p>

      <h3>FM is simply very fast vibrato</h3>

      <p>Now let’s jump back two chapter, and return to part 10 of Synth Secrets and the simple vibrato that I described in that article. <a href="#fig-12-3">Figure 12.3</a> shows what happens to a waveform (a ‘Carrier’) whose frequency is being swept up and down by a source of modulation (a ‘Modulator’). In this example, the frequency of that Modulator is significantly lower than that of the Carrier.</p>
      <figure id="fig-12-3">
        <img src="images/fig-12-3.png" />
        <figcaption>Figure 12.3</figcaption>
      </figure>

      <p>Now let’s ask ourselves what happens as we increase the Modulator’s frequency until it approaches, equals, or even exceeds that of the Carrier. At some point, instead of looking like a cyclical ‘squeezing’ and ‘stretching’ of the Carrier waveform, the modulation will become a form of distortion within the individual cycles of the Carrier waveform. To demonstrate this I have drawn an example using a very short segment of Carrier waveform – maybe one-eighth of a cycle or thereabouts (<a href="#fig-12-4">Figure 12.4</a>).</p>
      <figure id="fig-12-4">
        <img src="images/fig-12-4.png" />
        <figcaption>Figure 12.4</figcaption>
      </figure>

      <p>Let’s now apply a Modulator to this. In this example it will have a low amplitude, but will be many times the frequency of the Carrier (see <a href="#fig-12-5">Figure 12.5</a>) – since there are more than seven cycles of modulation in <a href="#fig-12-5">Figure 12.5</a>, which shows one-eighth of a Carrier cycle, this means that the Modulator frequency is approximately 60 times that of the Carrier. As you will appreciate, this sounds nothing like vibrato. But what does it sound like?</p>
      <figure id="fig-12-5">
        <img src="images/fig-12-5.png" />
        <figcaption>Figure 12.5</figcaption>
      </figure>

      <h3>Side bands, side bands everywhere</h3>

      <p>If you refer back to <a href="#eq-12-5">Equation 12.5</a>, you’ll see that the equation for A1 has two ‘alien’ terms within it: a2 and w2. These are, of course, the gain (maximum amplitude) and the frequency of the Modulator. So it’s fair to assume that each of these will have an affect on the nature of the modulated signal. Let’s look first at w2, and see what attribute of the output is influenced by the Modulator’s frequency.</p>
      <p>John Chowning discovered that FM, like AM, generates side bands – additional components, not necessarily harmonically related to the frequency of the Carrier or Modulator – in the frequency spectrum of the output signal. (For an explanation of what side bands are, please refer back to last chapter.) To see how frequency modulation produces side bands, let’s take an example of a sine wave Carrier with frequency wc and a sine wave Modulator of frequency wm. I have shown these in <a href="#fig-12-6">Figure 12.6</a>.</p>
      <figure id="fig-12-6">
        <img src="images/fig-12-6.png" />
        <figcaption>Figure 12.6</figcaption>
      </figure>

      <p>So far, so good… However, whereas AM generates just two side bands (wc+wm) and (wc-wm), FM produces a whole series that we can express as follows:</p>
      <figure class="equation-img" id="eq-12-6">
        <img src="images/eq-12-6.png" />
        <figcaption>Equation 12.6 – The side-band frequencies, where wsb = the series of side-band frequencies, wc = Carrier frequency, wm = Modulator frequency, and n = any integer (0, 1, 2, 3, 4, and so on)</figcaption>
      </figure>

      <p>To put this in English: each side band lies at a frequency equal to the Carrier frequency plus or minus an integer multiple of the Modulator frequency. Of course, since ‘n’ can take any integer value, in theory, applying frequency modulation to a signal produces an infinite series of side bands. In the real world, however, no system has infinite bandwidth, and analogue systems are limited to producing side bands within their finite bandwidth (see page 90 for more on bandwidth). Similarly, manufacturers of digital FM systems constrain the mathematics to those values that they deem significant.</p>
      <p>Fortunately, and despite this possible complication, the simple formula in <a href="#eq-12-6">Equation 12.6</a> makes it easy to see where the side bands are located. Given the Carrier and the Modulator shown in <a href="#fig-12-6">Figure 12.6</a>, we can show the side bands as shown in <a href="#fig-12-7">Figure 12.7</a>.</p>
      <figure id="fig-12-7">
        <img src="images/fig-12-7.png" />
        <figcaption>Figure 12.7</figcaption>
      </figure>

      <p>Now, what about the amplitudes of these side bands? OK, we now know that frequency modulation generates side bands, and that the Modulator’s frequency determines where they lie. But what is the ‘shape’ of the resulting spectrum? To answer this, we must turn to the second attribute of the Modulator – its gain, a2 – and introduce a new concept called the ‘Modulation Index’, or simply ‘ß’ (‘beta’).</p>
      <p>To explain ß, I must again direct you to our example of simple vibrato. Imagine a simple synthesizer patch in which the amplitude of a modulation is modified by a VCA that is itself controlled by a Control Voltage source (see <a href="#fig-12-8">Figure 12.8</a>). Don’t forget that in this case, the Modulator frequency wm is very much lower than the Carrier frequency wc.</p>
      <figure id="fig-12-8">
        <img src="images/fig-12-8.png" />
        <figcaption>Figure 12.8</figcaption>
      </figure>

      <p>Consider the case where the gain of the VCA is zero. Clearly, there will be no modulation, and the Carrier will produce a simple, unmodified tone. Now let’s increase the gain of the VCA slightly. As you would expect, a gentle vibrato results, much like that of the aforementioned guitarist or violinist. But let’s not stop here, and keep increasing the gain until the Modulator is sweeping the Carrier over a wide range of frequencies. At this point, a banshee wail or siren-typesound results. What we learn from this is that the sound we hear is not only determined by the frequency of the Modulator, but also by its gain or maximum amplitude.</p>
      <p>Applying these ideas to audio-frequency FM, we must first define ß as the ratio of the Carrier’s frequency sweep (the amount by which the Carrier deviates from its unmodulated frequency) divided by the Modulator frequency. We write this as follows:</p>
      <figure class="equation-img" id="eq-12-7">
        <img src="images/eq-12-7.png" />
        <figcaption>Equation 12.7 – The Modulation Index, where ß = the Modulation Index, (pronounced 'delta') means "the change in…", wc = Carrier frequency, and wm = Modulator frequency</figcaption>
      </figure>

      <p>Since the numerator of this expression (the bit ‘above the line’) is the change in the Carrier frequency, this means that ß is directly related to the amplitude of the Modulator. Now, this is the point at which things get a little weird, because for any given Modulator frequency, it is the Modulation Index (and, therefore, the amplitude of the Modulator) that determines the amplitude of each of the components in the spectrum of the output signal. No, I can’t demonstrate why this is so without invoking some of that scary maths I mentioned before, but I can show you a couple of examples.</p>
      <p>Let’s take that case where the Modulation Index is low – say in the region of 0.1 or less. The only significant side bands will be those closest to the Carrier frequency, and the result will look similar to that we obtained last chapter using Amplitude Modulation (see <a href="#fig-12-9">Figure 12.9</a>, above). In contrast, if ß is significantly higher – say, in the region of 5 – we obtain a much broader series of side bands, and a much more complex spectrum results (see <a href="#fig-12-10">Figure 12.10</a>).</p>
      <figure id="fig-12-9">
        <img src="images/fig-12-9.png" />
        <figcaption>Figure 12.9</figcaption>
      </figure>
      <figure id="fig-12-10">
        <img src="images/fig-12-10.png" />
        <figcaption>Figure 12.10</figcaption>
      </figure>

      <p>I have shown the first six side bands created by ß=5, but there are far more in the real signal. What’s more, you should note an interesting consequence of this value of ß: the amplitude of the original Carrier frequency has diminished significantly. Indeed, there is a value of ß that will cause it to disappear altogether!</p>
      <p>Now look at <a href="#eq-12-7">Equation 12.7</a> again and you’ll see that the denominator (the bit ‘below the line’) is the frequency of the Modulator. The consequences of this are very far-reaching. Let’s say that you have decided that the spectrum in <a href="#fig-12-10">Figure 12.10</a> is the tone that you want, and that you want to be able to play the sound up and down the keyboard in conventional manner. This will require both the Carrier and the Modulator to track the keyboard equally so that the harmonic relationship between the spectral components (the side bands) remains constant. But <a href="#eq-12-7">Equation 12.7</a> demonstrates that, as the Modulator frequency increases, ß decreases. For example, if you play one octave higher, wm doubles and ß is therefore halved. To avoid this change in the spectrum, the Modulator amplitude must increase proportionally – it must double – to keep ß constant. This is not as much of a problem as it sounds, and <a href="#fig-12-11">Figure 12.11</a> shows the simplest way to achieve this.</p>
      <figure id="fig-12-11">
        <img src="images/fig-12-11.png" />
        <figcaption>Figure 12.11</figcaption>
      </figure>

      <p>Mind you, this configuration is almost impossibly difficult to calibrate perfectly, and the vagaries of analogue components ensure that it will, at best, be inconsistent. This is the reason why FM is almost always implemented using digital technology.</p>

      <h3>FM versus analogue filters</h3>

      <p>To move on, we need to talk about bandwidth for a moment. I first mentioned this concept in regard to <a href="#eq-12-6">Equation 12.6</a>, when I said that real-world systems could not handle a signal of infinite bandwidth. So let’s discuss what the real bandwidth of an FM’d signal might be.</p>
      <p>For the purposes of this discussion, you could define the bandwidth as the range of frequencies occupied by any given signal. So, for example, a precise sine wave of, say, 100Hz would have negligible bandwidth (it exists only at a specific frequency) whereas a waveform with the same fundamental frequency plus one harmonic at 200Hz would occupy 100Hz of bandwidth. Likewise, a signal occupying the range between 100Hz and 1500Hz would have a bandwidth of 1400Hz, and so on. Now let’s apply this concept to the output from an FM system.</p>
      <p>Suppose that the Carrier is a sine wave of frequency 500Hz and the Modulator is a sine wave of frequency 300Hz. Clearly, if you mixed these together using a simple audio mixer, then using the simple definition above, the resulting signal would occupy a bandwidth of 200Hz.</p>
      <p>Now let’s configure the signals so that Amplitude Modulation occurs. From last chapter we know that the resulting three components have frequencies of wc, wc+wm, and wc-wm. These frequencies are 500Hz, 200Hz, and 800Hz respectively, so the bandwidth of the resulting signal – the ‘spread’ between the lowest and highest side bands – is 600Hz.</p>
      <p>Now let’s consider the bandwidth of an FM’d signal. Although theoretically infinite (remember, the series of side bands is infinite) the Modulation Index will ensure that side bands of higher ‘n’ are of negligible amplitude. This means that the bandwidth is, to all intents and purposes, finite. Moreover, there is a ‘rule-of-thumb’ equation that gives us a rough idea of the meaningful bandwidth of the output signal. I have shown this in <a href="#eq-12-8">Equation 12.8</a>.</p>
      <figure class="equation-img" id="eq-12-8">
        <img src="images/eq-12-8.png" />
        <figcaption>Equation 12.8 – The bandwidth of the modulated signal, where B = bandwidth, wm = modulator frequency, and ß = Modulation Index</figcaption>
      </figure>

      <p>Let’s say that ß is very small. Then, in our example of a 500Hz Carrier and a 300Hz Modulator, the bandwidth of the output will be equal to 2 x 300Hz x (1 + 0) = 600Hz. Thus, as I stated earlier, for low values of ß the result is much like that obtained using Amplitude Modulation.</p>
      <p>But now let’s suppose that ß=5. Then, in our example, the bandwidth of the output will be 2 x 300Hz x (1 + 5) = 3,600Hz. Clearly, high values of ß allow FM to create much more complex signals with a much higher bandwidth than the other methods of making two signals interact (see <a href="#fig-12-12">Figure 12.12</a>). Note that this calculation also tells you that, in this example, there are 24 discrete spectral components in the output. Unfortunately, you’ll have to read next chapter’s Synth Secrets to find out why.</p>
      <figure id="fig-12-12">
        <img src="images/fig-12-12.png" />
        <figcaption>Figure 12.12</figcaption>
      </figure>

      <p>Now let’s remind ourselves that, in simple subtractive synthesis, changes in the volume of a sound are most often determined by a contour generator acting upon an amplifier. Similarly, any changes in the tone of a sound are usually determined by a contour generator acting upon the cutoff frequency of a filter.</p>
      <p>In an FM configuration, the volume of the sound is still determined by the volume envelope of the audio signal (which is, of course, the modulated Carrier), but you no longer need a filter to modify the tone. This is because, for any given Modulator frequency, the Modulator amplitude determines the bandwidth of the output. You can create an interesting demonstration of this using just seven synthesizer modules patched together as shown in <a href="#fig-12-13">Figure 12.13</a>.</p>
      <figure id="fig-12-13">
        <img src="images/fig-12-13.png" />
        <figcaption>Figure 12.13</figcaption>
      </figure>

      <p>As you can see, the amplitude of the output signal will decrease as EG2 decreases the gain of VCA2 – so over time, the output gets quieter and quieter. At the same time, the maximum amplitude of the Modulator signal derived from VCO1 will increase as EG1 increases the gain of VCA1. This means that, as time passes, the Modulation Index increases, the bandwidth increases, and the output gets brighter and brighter. This is in marked contrast to natural sounds, where increased loudness almost always goes hand-in-hand with increased brightness.</p>
      <p>You might think that there’s nothing stopping you duplicating this effect using a filter, and it’s true that you can use a contour generator and a low-pass VCF to brighten a signal as time passes. But that configuration would be quite incapable of recreating the complex tonal changes that also occur in the FM’d tone – changes that you cannot reproduce using conventional subtractive methods.</p>

      <h3>Summary</h3>

      <p>So let’s summarise. Without solving the mathematics of FM, we can say the following two things about the relationship between the Modulator and the output signal:</p>
      <ul><li>The number of significant spectral components and their amplitudes are determined by the Modulation Index, which is proportional to the Modulator’s amplitude; but inversely proportional to the Modulator’s frequency…</li></ul>
      <p>…and…</p>
      <ul><li>For any given Carrier frequency, the position of the spectral components is determined by the Modulator’s frequency alone.</li></ul>
      <p>Although the proof of these statements and the calculation of the side bands’ amplitude spectrum is a nightmare, the basics are easily understood. And, whether we perform FM using an analogue synth or a digital one, these principles remain the same. So here’s this chapter’s Synth Secret (which, as usual, is no secret at all):</p>
      <blockquote><p>Frequency Modulation is a powerful method of synthesis that is as relevant to analogue synthesizers as it is to digital ones, and which is capable of generating sounds unobtainable by any other method.</p></blockquote>
      <p>Next chapter, we’ll take a closer look at some practical aspects of Frequency Modulation, and introduce the idea of ‘operators’ – a common concept if you own a DX7 synthesizer, but perhaps not one that you have encountered in analogue technology. We’ll even take a look at some basic FM programming on a modular analogue synth.</p>
      <p>Until then…</p>
    </section>
  </body>
</html>
